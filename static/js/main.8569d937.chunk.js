(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{203:function(e,n,t){"use strict";t.r(n);var l=t(0),o=t(40),a=t.n(o),r=(t(172),t(7)),c=t(90),s=t(216),i=t(228),u=t(220),j=t(127),d=t(227),p=t(226),f=t(66),b=t.n(f),O=t(27),m=t(63),x=m.onCallTimes,h=m.rulesByPerson,y=m.rulesBySlot,g=m.slots,k=m.slotCount,C={slots:g,people:[{key:0,text:"Personne"},{key:1,text:"Personne"},{key:2,text:"Personne"},{key:3,text:"Personne"},{key:4,text:"Personne"},{key:5,text:"Personne"},{key:6,text:"Personne"},{key:7,text:"Personne"},{key:8,text:"Personne"},{key:9,text:"Personne"}],onCallTimes:x,rulesByPerson:h,rulesBySlot:y,planning:{0:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},1:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},2:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},3:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},4:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},5:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},6:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},7:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},8:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},9:{0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null}},callback:{error:!1,message:{status:null,statusMsg:null}},onCallTimeCount:m.onCallTimeCount,slotCount:k,personCount:10,loading:!1,confirmResetOpen:!1,confirmResetDefaultOpen:!1},v=function(){var e=localStorage.getItem("data"),n=Object(l.useState)(null!==e?JSON.parse(e):C),t=Object(O.a)(n,2);return{data:t[0],setData:t[1],colors:["blue","red","orange","yellow","olive","green","teal","violet","purple","pink","brown"]}},S=t(62),T=t(221),_=t(87),P=t.n(_),I=t(64),B=t.n(I),R=t(126),N=t(55),w=t(130),D=t.n(w),E={API_URL:"https://resplanning-back.herokuapp.com"},J=function(e,n){e.slots=[].concat(Object(N.a)(e.slots),[{key:e.slotCount,text:"00h00"}]),e.people.forEach((function(n){var t=n.key;return e.planning[t][e.slotCount]=null})),e.slotCount+=1,localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))},A=function(e,n,t){e.slots=e.slots.filter((function(e){return e.key!==t})),e.people.forEach((function(n){return delete e.planning[n.key][t]})),e.rulesBySlot.forEach((function(e){return e.slots=e.slots.filter((function(e){return e!==t}))})),e.rulesByPerson.forEach((function(e){return e.people=e.people.filter((function(e){return e!==t}))})),localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))},M=function(e,n,t){e.people=e.people.filter((function(e){return e.key!==t})),delete e.planning[t],e.rulesBySlot.forEach((function(e){return e.slots=e.slots.filter((function(e){return e!==t}))})),e.rulesByPerson.forEach((function(e){return e.people=e.people.filter((function(e){return e!==t}))})),localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))},L=function(e,n,t){e.onCallTimes=e.onCallTimes.filter((function(e){return e.key!==t})),e.people.forEach((function(n){e.slots.forEach((function(l){l.key in e.planning[n.key]&&e.planning[n.key][l.key]===t&&(e.planning[n.key][l.key]=null)}))})),localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))},H=function(e,n){e.onCallTimes.forEach((function(t){var l=t.key;0!==l&&L(e,n,l)}))},z=function(e,n,t){var l=null;if(t in e.planning[n]&&(l=e.planning[n][t]),null!==l){var o=e.onCallTimes.find((function(e){return e.key===l}));if(o)return o.value}return null},F=function(e){var n=[["Personnes"]];return e.slots.forEach((function(e){n[0].push(e.text)})),e.people.forEach((function(t){var l=[e.people.find((function(e){return e.key===t.key})).text];e.slots.forEach((function(n){var o=null;n.key in e.planning[t.key]&&(o=e.planning[t.key][n.key]),l.push(null!==o?e.onCallTimes.find((function(e){return e.key===o})).text:null)})),n.push(l)})),n},V=function(e){var n=[];return e.forEach((function(e){return n.push(e.key)})),n},U=function(e,n){return n.forEach((function(n){n.slots.length>0&&-1!==n.slots[0]?n.slots=n.slots.filter((function(n){return e.slots.find((function(e){return e.key===n}))})):n.slots=[-1],n.people.length>0&&-1!==n.people[0]?n.people=n.people.filter((function(n){return e.people.find((function(e){return e.key===n}))})):n.people=[-1]})),n},q=function(){var e=Object(R.a)(B.a.mark((function e(n,t,l,o,a){var c,s,i,u,j,d;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===l){e.next=14;break}return c="{}",e.next=4,new Promise((function(e){var n=new FileReader;n.onload=function(){c=n.result,e()},n.readAsText(l)}));case 4:s=JSON.parse(c),i=s.onCallTimes,u=s.rulesByPerson,j=s.rulesBySlot,d=s.onCallTimeCount,H(n,t),n.onCallTimes=i,n.rulesBySlot=U(n,j),n.rulesByPerson=U(n,u),n.onCallTimeCount=d,localStorage.setItem("data",JSON.stringify(Object(r.a)({},n))),t(Object(r.a)({},n)),o(null);case 14:a(!1);case 15:case"end":return e.stop()}}),e)})));return function(n,t,l,o,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(R.a)(B.a.mark((function e(n,t){var l,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loading=!0,localStorage.setItem("data",JSON.stringify(Object(r.a)({},n))),t(Object(r.a)({},n)),l=JSON.stringify({planning:n.planning,on_call_times:V(n.onCallTimes),slots:V(n.slots),people:V(n.people),rules_by_person:n.rulesByPerson,rules_by_slot:n.rulesBySlot}),o={method:"POST",url:E.API_URL+"/generate/",headers:{"Content-Type":"application/json"},data:l},e.next=7,D()(o).then((function(e){n.planning=JSON.parse(JSON.stringify(e.data.planning)),n.loading=!1,localStorage.setItem("data",JSON.stringify(Object(r.a)({},n))),t(Object(r.a)({},n)),console.log(n.planning)})).catch((function(e){var l,o;n.callback.error=!0,n.callback.message={status:null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.status,statusMsg:null===e||void 0===e||null===(o=e.response)||void 0===o?void 0:o.statusText},n.loading=!1,localStorage.setItem("data",JSON.stringify(Object(r.a)({},n))),t(Object(r.a)({},n))}));case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),W=t(2),K=function(e){var n=e.data,t=e.setData,l=v().colors;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{children:Object(W.jsx)("b",{children:"La premi\xe8re permanence compl\xe8te le planning par d\xe9faut"})}),n.onCallTimes.map((function(e){var o=e.key,a=e.text;return Object(W.jsxs)(c.a,{color:l[o%l.length],horizontal:!0,style:{marginTop:"1vh"},children:[0!==o&&Object(W.jsx)(S.a,{name:"remove",style:{cursor:"pointer"},onClick:function(){return L(n,t,o)}}),Object(W.jsx)(P.a,{initialValue:a,save:function(e){return function(e,n,t,l){e.onCallTimes.find((function(e){return e.key===l})).text=t,localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))}(n,t,e,o)}})]},o)})),Object(W.jsx)(T.a,{content:"Ajouter une permanence",inverted:!0,basic:!0,trigger:Object(W.jsx)(S.a,{color:"green",name:"add",style:{cursor:"pointer"},onClick:function(){return function(e,n){e.onCallTimes=[].concat(Object(N.a)(e.onCallTimes),[{key:e.onCallTimeCount,text:"Perm",value:e.onCallTimeCount}]),e.onCallTimeCount+=1,localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))}(n,t)}})})]})},Q=t(225),X=t(133),Y=function(e){var n=e.data,t=e.setData;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(Q.a,{celled:!0,padded:!0,color:"green",children:[Object(W.jsx)(Q.a.Header,{children:Object(W.jsxs)(Q.a.Row,{textAlign:"center",children:[Object(W.jsx)(Q.a.HeaderCell,{singleLine:!0,width:4,children:"Personnes"}),n.slots.map((function(e){return Object(W.jsxs)(Q.a.HeaderCell,{singleLine:!0,children:[Object(W.jsx)(S.a,{color:"red",name:"remove",style:{cursor:"pointer"},onClick:function(){return A(n,t,e.key)}}),Object(W.jsx)(P.a,{initialValue:e.text,save:function(l){return function(e,n,t,l){e.slots.find((function(e){return e.key===l})).text=t,localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))}(n,t,l,e.key)}})]},e.key)})),Object(W.jsx)(Q.a.Cell,{children:Object(W.jsx)(X.a,{circular:!0,color:"green",icon:"add",onClick:function(){return J(n,t)}})})]})}),Object(W.jsx)(Q.a.Body,{children:n.people.map((function(e){return Object(W.jsxs)(Q.a.Row,{children:[Object(W.jsxs)(Q.a.Cell,{singleLine:!0,textAlign:"center",children:[Object(W.jsx)(S.a,{color:"red",name:"remove",style:{cursor:"pointer"},onClick:function(){return M(n,t,e.key)}}),Object(W.jsx)(P.a,{initialValue:e.text,save:function(l){return function(e,n,t,l){e.people.find((function(e){return e.key===l})).text=t.normalize("NFD").replace(/[\u0300-\u036f]/g,""),localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))}(n,t,l,e.key)}})]}),n.slots.map((function(l){return Object(W.jsx)(Q.a.Cell,{selectable:!0,positive:l.key in n.planning[e.key],negative:!(l.key in n.planning[e.key]),onClick:function(){!function(e,n,t,l){l in e.planning[t]?delete e.planning[t][l]:e.planning[t][l]=null,localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))}(n,t,e.key,l.key)}},e+l+e.key+l.key)}))]},e.key)}))})]}),Object(W.jsx)(X.a,{color:"green",onClick:function(){!function(e,n){e.people=[].concat(Object(N.a)(e.people),[{key:e.personCount,text:"Personne"}]),e.planning[e.personCount]={},e.slots.forEach((function(n){e.planning[e.personCount][n.key]=null})),e.personCount+=1,localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))}(n,t)},children:"Ajouter une personne"})]})},Z=t(222),$=function(e){var n=e.data,t=e.setData,l=v().colors;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("b",{children:"Pense \xe0 vider le planning si tu veux en g\xe9n\xe9rer un nouveau"}),Object(W.jsxs)(Q.a,{celled:!0,padded:!0,color:"green",children:[Object(W.jsx)(Q.a.Header,{children:Object(W.jsxs)(Q.a.Row,{textAlign:"center",children:[Object(W.jsx)(Q.a.HeaderCell,{singleLine:!0,width:4,children:"Personnes"}),n.slots.map((function(e){return Object(W.jsxs)(Q.a.HeaderCell,{singleLine:!0,children:[Object(W.jsx)(S.a,{color:"red",name:"remove",style:{cursor:"pointer"},onClick:function(){return A(n,t,e.key)}}),e.text]},e.key)})),Object(W.jsx)(Q.a.Cell,{children:Object(W.jsx)(X.a,{circular:!0,color:"green",icon:"add",onClick:function(){return J(n,t)}})})]})}),Object(W.jsx)(Q.a.Body,{children:n.people.map((function(e){return Object(W.jsxs)(Q.a.Row,{children:[Object(W.jsxs)(Q.a.Cell,{singleLine:!0,textAlign:"center",children:[Object(W.jsx)(S.a,{color:"red",name:"remove",style:{cursor:"pointer"},onClick:function(){return M(n,t,e.key)}}),e.text]}),n.slots.map((function(o){return Object(W.jsx)(Q.a.Cell,{singleLine:!0,children:o.key in n.planning[e.key]?Object(W.jsx)(X.a.Group,{color:null!==z(n,e.key,o.key)?l[z(n,e.key,o.key)%l.length]:null,children:Object(W.jsx)(Z.a,{clearable:!0,className:"button",placeholder:"Perm",fluid:!0,value:z(n,e.key,o.key),options:n.onCallTimes,onChange:function(l,a){!function(e,n,t,l,o){e.planning[l][o]=""!==t?e.onCallTimes.find((function(e){return e.value===t})).key:null,localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))}(n,t,a.value,e.key,o.key)},selection:!0,style:{width:"100%"}})}):null},e+o+e.key+o.key)}))]},e.key)}))})]}),Object(W.jsx)(X.a,{color:"red",onClick:function(){return function(e,n){e.people.forEach((function(n){e.slots.forEach((function(t){t.key in e.planning[n.key]&&(e.planning[n.key][t.key]=null)}))})),localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))}(n,t)},children:"Vider"})]})},ee=t(233),ne=t(230),te=t(217),le=t(218),oe=function(e,n,t){var o=e.onCallTimes,a=e.people,c=e.slots,s=e.rulesBySlot,i=e.rulesByPerson,u="slot"===n?s[t]:i[t],j=Object(l.useState)(u?Object(r.a)({},u):{method:"exact",param:0,counter:-1,slots:[],people:[],on_call_times:[],exigency:0,disable:!1}),d=Object(O.a)(j,2),p=d[0],f=d[1],b=-1!==p.people[0]?[{key:-1,text:"Tout le monde",value:-1}].concat(a.filter((function(e){var n=e.key;return!p.people.includes(n)}))):[],m=-1!==p.slots[0]?[{key:-1,text:"Tous les cr\xe9neaux",value:-1}].concat(c.filter((function(e){var n=e.key;return!p.slots.includes(n)}))):[],x=Object(l.useState)({onCallTimesChoice:o.filter((function(e){var n=e.key;return!p.on_call_times.includes(String(n))})),peopleChoice:b,slotsChoice:m}),h=Object(O.a)(x,2),y=h[0],g=h[1];return{rule:p,setRule:f,formData:y,setFormData:g}},ae=function(e,n,t){e.counter=parseInt(t),n(Object(r.a)({},e))},re=function(e,n){e.isOpen=!1,n(Object(r.a)({},e))},ce=function(e){var n=e.modalSettings,t=e.setModalSettings,l=e.ruleName,o=e.ruleId,a=e.data,i=e.setData,u=oe(a,l,o),j=u.rule,d=u.setRule,p=u.formData,f=u.setFormData,b=a.onCallTimes,O=a.people,m=a.slots,x=p.onCallTimesChoice,h=p.peopleChoice,y=p.slotsChoice,g=j.on_call_times,k=j.people,C=j.slots,T=v().colors;return Object(W.jsxs)(s.a,{children:[Object(W.jsxs)(ne.a,{children:[Object(W.jsxs)(ne.a.Row,{columns:4,children:[Object(W.jsx)(ne.a.Column,{children:Object(W.jsx)("h3",{children:"M\xe9thode :"})}),Object(W.jsx)(ne.a.Column,{children:Object(W.jsx)(Z.a,{clearable:"exact"!==j.method,value:j.method,selection:!0,onChange:function(e,n){return function(e,n,t){e.method=t||"exact",n(Object(r.a)({},e))}(j,d,n.value)},options:[{key:"exact",value:"exact",text:"Exactement"},{key:"at_least",value:"at_least",text:"Au moins"},{key:"at_most",value:"at_most",text:"Au plus"}]})}),Object(W.jsx)(ne.a.Column,{children:Object(W.jsx)("h3",{children:"Combien :"})}),Object(W.jsx)(ne.a.Column,{children:Object(W.jsx)(te.a,{value:j.param,min:0,onChange:function(e,n){!function(e,n,t){e.param=parseInt(t),n(Object(r.a)({},e))}(j,d,n.value),-1!==j.counter&&ae(j,d,j.param+1)},type:"number"})})]}),Object(W.jsxs)(ne.a.Row,{columns:2,children:[Object(W.jsx)(ne.a.Column,{children:Object(W.jsx)("h3",{children:"Permanences :"})}),Object(W.jsx)(ne.a.Column,{children:g.map((function(e){return Object(W.jsxs)(c.a,{color:T[e%T.length],style:{marginTop:"0.5vh"},children:[Object(W.jsx)(S.a,{name:"remove",style:{cursor:"pointer"},onClick:function(){return function(e,n,t,l,o,a){e.on_call_times=e.on_call_times.filter((function(e){return e!==a})),t.onCallTimesChoice=o.onCallTimes.filter((function(n){var t=n.key;return!e.on_call_times.includes(String(t))})),n(Object(r.a)({},e)),l(Object(r.a)({},t))}(j,d,p,f,a,e)}}),b.find((function(n){return n.key===parseInt(e)})).text]},e)}))})]}),Object(W.jsx)(ne.a.Row,{children:x.map((function(e){var n=e.key,t=e.text;return Object(W.jsx)(c.a,{horizontal:!0,color:T[n%T.length],style:{cursor:"pointer",marginTop:"0.5vh"},onClick:function(){return function(e,n,t,l,o){e.on_call_times=[].concat(Object(N.a)(e.on_call_times),[String(o)]).sort(),t.onCallTimesChoice=t.onCallTimesChoice.filter((function(e){return e.key!==o})),n(Object(r.a)({},e)),l(Object(r.a)({},t))}(j,d,p,f,n)},children:t},n)}))}),"person"===l&&Object(W.jsxs)(ne.a.Row,{columns:4,children:[Object(W.jsx)(ne.a.Column,{children:Object(W.jsx)("h3",{children:"\xc0 la suite ?"})}),Object(W.jsx)(ne.a.Column,{children:Object(W.jsx)(ee.a,{toggle:!0,checked:-1!==j.counter,onChange:function(){ae(j,d,-1===j.counter?j.param+1:-1)}})})]}),Object(W.jsxs)(ne.a.Row,{columns:2,children:[Object(W.jsx)(ne.a.Column,{children:Object(W.jsx)("h3",{children:"Cr\xe9neaux :"})}),Object(W.jsx)(ne.a.Column,{children:C.map((function(e){return Object(W.jsxs)(c.a,{horizontal:!0,color:-1===e?"purple":T[e%T.length],style:{marginTop:"0.5vh"},children:[Object(W.jsx)(S.a,{name:"remove",style:{cursor:"pointer"},onClick:function(){return function(e,n,t,l,o,a){e.slots=e.slots.filter((function(e){return e!==a})),t.slotsChoice=[{key:-1,text:"Tous les cr\xe9neaux",value:-1}].concat(o.filter((function(n){var t=n.key;return!e.slots.includes(t)}))),n(Object(r.a)({},e)),l(Object(r.a)({},t))}(j,d,p,f,m,e)}}),-1===e?"Tous les cr\xe9neaux":m.find((function(n){return n.key===e})).text]},e)}))})]}),Object(W.jsx)(ne.a.Row,{children:y.map((function(e){var n=e.key,t=e.text;return Object(W.jsx)(c.a,{color:-1===n?"purple":T[n%T.length],style:{cursor:"pointer",marginTop:"0.5vh"},onClick:function(){return function(e,n,t,l,o){e.slots=-1===o?[o]:[].concat(Object(N.a)(e.slots),[o]).sort((function(e,n){return e.key-n.key})),t.slotsChoice=-1===o?[]:t.slotsChoice.filter((function(e){return e.key!==o})),n(Object(r.a)({},e)),l(Object(r.a)({},t))}(j,d,p,f,n)},children:t},n)}))}),Object(W.jsxs)(ne.a.Row,{columns:2,children:[Object(W.jsx)(ne.a.Column,{children:Object(W.jsx)("h3",{children:"Personnes :"})}),Object(W.jsx)(ne.a.Column,{children:k.map((function(e){return Object(W.jsxs)(c.a,{horizontal:!0,color:-1===e?"teal":T[e%T.length],style:{marginTop:"0.5vh"},children:[Object(W.jsx)(S.a,{name:"remove",style:{cursor:"pointer"},onClick:function(){return function(e,n,t,l,o,a){e.people=e.people.filter((function(e){return e!==a})),t.peopleChoice=[{key:-1,text:"Tout le monde",value:-1}].concat(o.filter((function(n){var t=n.key;return!e.people.includes(t)}))),n(Object(r.a)({},e)),l(Object(r.a)({},t))}(j,d,p,f,O,e)}}),-1===e?"Tout le monde":O.find((function(n){return n.key===e})).text]},e)}))})]}),Object(W.jsx)(ne.a.Row,{children:h.map((function(e){var n=e.key,t=e.text;return Object(W.jsx)(c.a,{color:-1===n?"teal":T[n%T.length],style:{cursor:"pointer",marginTop:"0.5vh"},onClick:function(){return function(e,n,t,l,o){e.people=-1===o?[o]:[].concat(Object(N.a)(e.people),[o]).sort((function(e,n){return e.key-n.key})),t.peopleChoice=-1===o?[]:t.peopleChoice.filter((function(e){return e.key!==o})),n(Object(r.a)({},e)),l(Object(r.a)({},t))}(j,d,p,f,n)},children:t},n)}))})]}),Object(W.jsx)(le.a,{}),Object(W.jsx)(X.a,{negative:!0,onClick:function(){return re(n,t)},children:"Annuler"}),Object(W.jsx)(X.a,{positive:!0,onClick:function(){return function(e,n,t,l,o,a,c){var s=a.rulesBySlot,i=a.rulesByPerson,u="slot"===l?s:i;u[o]?u[o]=t:u.push(t),localStorage.setItem("data",JSON.stringify(Object(r.a)({},a))),c(Object(r.a)({},a)),e.isOpen=!1,n(Object(r.a)({},e))}(n,t,j,l,o,a,i)},children:"Sauvegarder"})]})},se=function(){var e=Object(l.useState)({isOpen:!1,ruleId:null}),n=Object(O.a)(e,2);return{modalSettings:n[0],setModalSettings:n[1]}},ie=function(e){var n=e.name,t=e.data,l=e.setData,o=v().colors,a="slot"===n?t.rulesBySlot:t.rulesByPerson,s=se(),i=s.modalSettings,u=s.setModalSettings,d="person"===n?["","","M\xe9thode","Param\xe8tre","Permanences","","Cr\xe9neaux","Personnes","Actif"]:["","","M\xe9thode","Param\xe8tre","Permanences","Cr\xe9neaux","Personnes","Actif"];return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(j.a,{open:i.isOpen,onClose:function(){return re(i,u)},children:[Object(W.jsxs)(j.a.Header,{children:["R\xe8gle par ","slot"===n?"cr\xe9neau":"personne"]}),Object(W.jsx)(j.a.Content,{children:Object(W.jsx)(ce,{modalSettings:i,setModalSettings:u,ruleId:i.ruleId,ruleName:n,data:t,setData:l})})]}),"slot"===n&&Object(W.jsx)("div",{children:Object(W.jsx)("b",{children:"Si une permanence n'appara\xeet pas sur un cr\xe9neau, elle est automatiquement d\xe9sactiv\xe9e"})}),Object(W.jsxs)(Q.a,{celled:!0,padded:!0,color:"blue",children:[Object(W.jsx)(Q.a.Header,{children:Object(W.jsx)(Q.a.Row,{children:d.map((function(e,n){return Object(W.jsx)(Q.a.HeaderCell,{children:e},n)}))})}),Object(W.jsx)(Q.a.Body,{children:a.map((function(e,a){return Object(W.jsxs)(Q.a.Row,{children:[Object(W.jsx)(Q.a.Cell,{style:{textAlign:"center"},children:Object(W.jsx)(S.a,{color:"red",name:"remove",style:{cursor:"pointer"},onClick:function(){return function(e,n,t,l){"slot"===e?n.rulesBySlot=n.rulesBySlot.filter((function(e,n){return n!==l})):"person"===e&&(n.rulesByPerson=n.rulesByPerson.filter((function(e,n){return n!==l}))),localStorage.setItem("data",JSON.stringify(Object(r.a)({},n))),t(Object(r.a)({},n))}(n,t,l,a)}})}),Object(W.jsx)(Q.a.Cell,{style:{textAlign:"center"},children:Object(W.jsx)(S.a,{color:"blue",name:"edit",style:{cursor:"pointer"},onClick:function(){return function(e,n,t){e.isOpen=!0,e.ruleId=t,n(Object(r.a)({},e))}(i,u,a)}})}),Object(W.jsxs)(Q.a.Cell,{children:["at_least"===e.method&&"Au moins","at_most"===e.method&&"Au plus","exact"===e.method&&"Exactement"]}),Object(W.jsx)(Q.a.Cell,{style:{textAlign:"center"},children:e.param}),Object(W.jsx)(Q.a.Cell,{children:e.on_call_times.map((function(e){var n=t.onCallTimes.filter((function(n){return e.split("+").map((function(e){return parseInt(e)})).includes(n.key)}));return Object(f.isEmpty)(n)?null:Object(W.jsxs)(c.a,{color:o[n.length>1?10*n.reduce((function(e,n){return e+n.key}),0)%o.length:n[0].key%o.length],horizontal:!0,style:{marginTop:"1vh"},children:[n[0].text,n.filter((function(e){return e.key!==n[0].key})).map((function(e){return" + "+e.text}))]},e)}))}),"person"===n&&Object(W.jsx)(Q.a.Cell,{style:{textAlign:"center"},children:-1!==e.counter&&"\xe0 la suite"}),Object(W.jsx)(Q.a.Cell,{children:e.slots.map((function(e){var n;return Object(W.jsx)(c.a,{color:-1===e?"purple":o[e%o.length],style:{marginTop:"1vh"},children:-1===e?"Tous les cr\xe9neaux":null===(n=t.slots.find((function(n){return n.key===e})))||void 0===n?void 0:n.text},e)}))}),Object(W.jsx)(Q.a.Cell,{children:e.people.map((function(e){return Object(W.jsx)(c.a,{color:-1===e?"teal":o[e%o.length],style:{marginTop:"1vh"},children:-1===e?"Tout le monde":t.people.find((function(n){return n.key===e})).text},e)}))}),Object(W.jsx)(Q.a.Cell,{style:{textAlign:"center"},children:Object(W.jsx)(ee.a,{toggle:!0,checked:!e.disable,onChange:function(){e.disable=!e.disable,l(Object(r.a)({},t))}})})]},e+a)}))})]}),Object(W.jsx)(X.a,{positive:!0,onClick:function(){return function(e,n){e.isOpen=!0,e.ruleId=null,n(Object(r.a)({},e))}(i,u)},children:"Ajouter une contrainte"})]})},ue=function(e){var n=e.data,t=e.setData,l=[{title:"Contraintes par cr\xe9neau",content:Object(W.jsx)(ie,{name:"slot",data:n,setData:t})},{title:"Contraintes par personne",content:Object(W.jsx)(ie,{name:"person",data:n,setData:t})}],o=b.a.times(l.length,(function(e){return{key:"panel-".concat(e),title:{content:Object(W.jsx)(c.a,{color:"black",content:l[e].title})},content:{content:l[e].content}}}));return Object(W.jsx)(s.a,{children:Object(W.jsx)(p.a,{exclusive:!1,panels:o})})},je=t(223),de=t(219),pe=t(157),fe=t(132),be=function(e){var n=e.data,t=e.setData,o=Object(l.useState)(!1),a=Object(O.a)(o,2),i=(a[0],a[1],Object(l.useState)(!1)),u=Object(O.a)(i,2),d=u[0],p=u[1],f=Object(l.useState)(!1),b=Object(O.a)(f,2),m=b[0],x=b[1],h=Object(l.useState)(null),y=Object(O.a)(h,2),g=y[0],k=y[1],v=Object(l.useState)(null),T=Object(O.a)(v,2);T[0],T[1];return Object(W.jsx)(je.a,{className:"ui fixed inverted menu",children:Object(W.jsxs)(s.a,{children:[Object(W.jsx)(je.a.Item,{header:!0,children:"Resplanning"}),Object(W.jsx)(je.a.Item,{onClick:function(){return G(Object(r.a)({},n),t)},children:Object(W.jsx)(X.a,{color:"teal",children:"G\xe9n\xe9ration Planning"})}),Object(W.jsxs)(je.a.Menu,{position:"right",children:[Object(W.jsxs)(je.a.Item,{children:[Object(W.jsx)(X.a,{color:"orange",onClick:function(){return p(!0)},children:"Options R\xe8gles"}),Object(W.jsxs)(j.a,{open:d,onClose:function(){return p(!1)},children:[Object(W.jsxs)(j.a.Content,{children:[Object(W.jsx)(c.a,{color:"olive",onClick:function(){return Object(fe.a)({data:{onCallTimes:n.onCallTimes,rulesByPerson:n.rulesByPerson,rulesBySlot:n.rulesBySlot,slots:n.slots,slotCount:n.slotCount,onCallTimesCount:n.onCallTimesCount},fileName:"resplanning-config",exportType:fe.a.types.json})},style:{cursor:"pointer"},children:"Exporter les r\xe8gles"}),Object(W.jsx)(le.a,{}),Object(W.jsx)("label",{htmlFor:"file",style:{cursor:"pointer",fontWeight:"bold",marginRight:"0.5vw"},children:Object(W.jsx)(c.a,{color:"violet",children:"Importer des r\xe8gles"})}),Object(W.jsx)(te.a,{id:"file",type:"file",accept:".json",onChange:function(e){return k(e.target.files[0])},style:{display:"none"}}),g?Object(W.jsx)(S.a,{color:"green",name:"circle"}):Object(W.jsx)(S.a,{color:"red",name:"circle outline"})]}),Object(W.jsxs)(j.a.Actions,{children:[Object(W.jsx)(X.a,{color:"red",onClick:function(){return p(!1)},children:"Annuler"}),Object(W.jsx)(X.a,{color:"green",onClick:function(){return q(n,t,g,k,p)},children:"Valider"})]})]})]}),Object(W.jsx)(je.a.Item,{children:Object(W.jsx)(pe.CSVLink,{data:F(n),filename:"planning.csv",children:Object(W.jsx)(X.a,{color:"brown",children:"Exportation Planning"})})}),Object(W.jsxs)(je.a.Item,{children:[Object(W.jsx)(X.a,{onClick:function(){return x(!0)},color:"red",children:"R\xe9initialiser"}),Object(W.jsxs)(j.a,{open:m,onClose:function(){return x(!1)},children:[Object(W.jsxs)(j.a.Content,{children:[Object(W.jsx)(X.a,{onClick:function(){return function(e,n){e.confirmResetDefaultOpen=!0,n(Object(r.a)({},e))}(n,t)},color:"orange",children:"Remettre les param\xe8tres par d\xe9faut"}),Object(W.jsx)(de.a,{open:n.confirmResetDefaultOpen,content:"Es-tu s\xfbr.e de vouloir remettre les param\xe8tres par d\xe9faut de TOUTES les donn\xe9es de la page (permanences, r\xe8gles, personnes...) ?",onCancel:function(){return function(e,n){e.confirmResetDefaultOpen=!1,n(Object(r.a)({},e))}(n,t)},onConfirm:function(){!function(e,n){localStorage.setItem("data",JSON.stringify(C)),n(C)}(0,t),x(!1)}}),Object(W.jsx)(le.a,{}),Object(W.jsx)(X.a,{onClick:function(){return function(e,n){e.confirmResetOpen=!0,n(Object(r.a)({},e))}(n,t)},color:"black",children:"Remise \xe0 z\xe9ro globale"}),Object(W.jsx)(de.a,{open:n.confirmResetOpen,content:"Es-tu s\xfbr.e de vouloir remettre \xe0 z\xe9ro TOUTES les donn\xe9es de la page (permanences, r\xe8gles, personnes...) ?",onCancel:function(){return function(e,n){e.confirmResetOpen=!1,n(Object(r.a)({},e))}(n,t)},onConfirm:function(){!function(e,n){e={slots:[],people:[],onCallTimes:[{key:0,text:"Pause",value:0}],rulesByPerson:[],rulesBySlot:[],planning:{},callback:{error:!1,message:{status:null,statusMsg:null}},onCallTimeCount:1,slotCount:0,personCount:0,loading:!1,confirmResetOpen:!1,confirmResetDefaultOpen:!1},localStorage.setItem("data",JSON.stringify(Object(r.a)({},e))),n(Object(r.a)({},e))}(n,t),x(!1)}})]}),Object(W.jsx)(j.a.Actions,{children:Object(W.jsx)(X.a,{color:"red",onClick:function(){return x(!1)},children:"Annuler"})})]})]})]})]})})},Oe=t(231),me=t(224),xe=function(){return Object(W.jsx)(Oe.a,{className:"ui inverted vertical segment",children:Object(W.jsx)(s.a,{textAlign:"center",children:Object(W.jsxs)("p",{children:["Developp\xe9 par ",Object(W.jsx)(me.a,{as:"a",href:"mailto:maxime@famillevaillant.fr",children:"Maxime Vaillant"})]})})})};var he=function(){var e=v(),n=e.data,t=e.setData,l=[{title:"Permanences",content:Object(W.jsx)(K,{data:n,setData:t})},{title:"Contraintes",content:Object(W.jsx)(ue,{data:n,setData:t})},{title:"Disponibilit\xe9s",content:Object(W.jsx)(Y,{data:n,setData:t})},{title:"Planning",content:Object(W.jsx)($,{data:n,setData:t})}],o=b.a.times(l.length,(function(e){return{key:"panel-".concat(e),title:{content:Object(W.jsx)(c.a,{basic:!0,color:"black",size:"massive",content:l[e].title})},content:{content:l[e].content}}}));return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(be,{data:n,setData:t}),Object(W.jsxs)(s.a,{fluid:!0,style:{paddingLeft:"3vw",paddingTop:"10vh",overflow:"scroll",minHeight:"100vh"},children:[n.loading&&Object(W.jsx)(i.a,{active:!0,page:!0,children:Object(W.jsx)(u.a,{size:"massive",children:"Loading"})}),Object(W.jsx)(j.a,{basic:!0,open:n.callback.error,onClose:function(){n.callback.error=!1,n.callback.message={status:null,statusMsg:null},t(Object(r.a)({},n))},children:Object(W.jsxs)(d.a,{negative:!0,children:[Object(W.jsxs)(d.a.Header,{children:[404===n.callback.message.status&&"Mod\xe8le introuvable",400===n.callback.message.status&&"Donn\xe9es invalides",409===n.callback.message.status&&"Erreur avec le solveur",500===n.callback.message.status&&"Erreur syst\xe8me"]}),Object(W.jsxs)(d.a.Content,{children:[404===n.callback.message.status&&"Trop de contraintes li\xe9es aux r\xe8gles ou manque de personnes",500===n.callback.message.status&&"Contactes le dev"]})]})}),Object(W.jsx)(p.a,{panels:o,exclusive:!1,fluid:!0})]}),Object(W.jsx)(xe,{})]})};a.a.render(Object(W.jsx)(he,{}),document.getElementById("root"))},63:function(e){e.exports=JSON.parse('{"onCallTimes":[{"key":0,"text":"Pause","value":0},{"key":1,"text":"S\xe9cu pente","value":1},{"key":2,"text":"S\xe9cu escalier","value":2},{"key":3,"text":"Bar","value":3},{"key":4,"text":"Caisse","value":4},{"key":5,"text":"M\xe9nage","value":5},{"key":6,"text":"S\xe9cu trottoir","value":6}],"rulesByPerson":[{"method":"at_most","param":2,"counter":-1,"slots":[-1],"people":[-1],"on_call_times":["1","2"],"exigency":0,"disable":false},{"method":"at_most","param":3,"counter":-1,"slots":[-1],"people":[-1],"on_call_times":["1+2"],"exigency":0,"disable":false},{"method":"at_most","param":1,"counter":2,"slots":[-1],"people":[-1],"on_call_times":["1+2","0","4"],"exigency":0,"disable":false},{"method":"at_most","param":2,"counter":3,"slots":[-1],"people":[-1],"on_call_times":["3"],"exigency":0,"disable":false}],"rulesBySlot":[{"method":"exact","param":2,"counter":-1,"slots":[0,1,2,3,4,5,6],"people":[-1],"on_call_times":["1","2"],"exigency":0,"disable":false},{"method":"exact","param":1,"counter":-1,"slots":[0,1,2,3,4,5,6],"people":[-1],"exigency":0,"on_call_times":["4"],"disable":false},{"method":"at_least","param":5,"counter":-1,"slots":[0,1,2,3,4,5,6],"people":[-1],"exigency":0,"on_call_times":["3"],"disable":false},{"method":"at_most","param":6,"counter":-1,"slots":[0,1,2,3,4,5,6],"people":[-1],"exigency":0,"on_call_times":["3"],"disable":false},{"method":"exact","param":4,"counter":-1,"slots":[7],"people":[-1],"exigency":0,"on_call_times":["6"],"disable":false},{"method":"at_least","param":1,"counter":-1,"slots":[7,8],"people":[-1],"on_call_times":["5"],"exigency":0,"disable":false},{"method":"exact","param":0,"counter":-1,"slots":[7,8],"people":[-1],"on_call_times":["0"],"exigency":0,"disable":false}],"slots":[{"key":0,"text":"18h20"},{"key":1,"text":"19h00"},{"key":2,"text":"19h30"},{"key":3,"text":"20h00"},{"key":4,"text":"20h30"},{"key":5,"text":"21h00"},{"key":6,"text":"21h30"},{"key":7,"text":"22h00"},{"key":8,"text":"22h30"}],"slotCount":9,"onCallTimeCount":7}')}},[[203,1,2]]]);
//# sourceMappingURL=main.8569d937.chunk.js.map